---
description: Detects divergence between code implementation and CheckMate specifications. Use when checking if code has changed without corresponding spec updates.
globs: 
alwaysApply: false
---
# CheckMate ¬∑ Spec‚Äëvs‚ÄëCode Drift Audit

This rule detects divergence between code implementation and CheckMate specifications after commits.

```rule type=activation
activationTrigger:
  event: after_commit
  maxRuns: 1
```

```rule type=on_commit
# After each commit, audit changed specs
CM_LIST=$(git diff --name-only HEAD~1 HEAD | grep "checkmate/specs/.*\.md" | tr '\n' ' ')

if [ -n "$CM_LIST" ]; then
  echo "üîç Auditing changed spec files: $CM_LIST"
  checkmate audit --target "$CM_LIST" --quiet --audit
  
  if [ $? -ne 0 ]; then
    echo "‚ö†Ô∏è Spec drift detected in one or more files."
  else
    echo "‚úÖ No spec drift detected."
  fi
else
  echo "‚ÑπÔ∏è No spec files changed in this commit."
fi